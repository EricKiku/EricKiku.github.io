---
title: 网工
icon: suanfaku
category:
  - 随笔
  - 课程
---
# ""

# 错题

> 同属于报文摘要算法的是：MD5和SHA-1

> 某网站向CA申请了数字证书，用户通过CA的签名来验证网站的真伪。

> FTP端口:21，Telnet端口：23，SMTP端口：25，DNS端口：53

> RIPv2的改进：
>
> 1. 使用组播而不是广播来传播路由更新报文
> 2. 采用了触发更新机制加速路由收敛。即出现路由变化时立即向邻居发送路由更新报文，而不必等待更新周期是否到达
> 3. 是一个无类别的协议。可以使用可变长子网掩码，也支持无类别域间路由CIDR
> 4. RIPv2支持认证，使用经过散列的口令字来限制路由更新信息的传播

> 世界各国通用的ISM频段是：2400--2483.5MHz

> E1信道的每个话音信道的数据速率是：64kb/s

> OSPF报文采用IP协议进行封装

> SNMP协议属于 应用层协议

> 要实现VTP动态修剪，在VTP域中的所有交换机都必须是服务器

> 广播多址网络：Ethernet

> 流水线的吞吐率是 最长流水段操作时间的倒数

> 核心层：提供不同区域之间的最佳路由和高速数据传送
>
> 汇聚层：将网络业务连接到接入层，并且实施与安全、流量、负载和路由相关的策略。
>
> 接入层：为用户提供了在本地网段访问应用系统的能力，还要解决相邻用户之间的互访需要，接入层负载一些用户信息的收集工作和用户管理功能。

> OSPF使用LSA分组来更新和维护拓扑数据库

> 把IP网络划分子网的好处是：减少广播域的大小

> Linux grep (global regular expression) 命令用于查找文件里符合条件的字符串或正则表达式。

> windows中权限最低的是everyone

> 三重DES加密使用2个密钥对，密钥长度是112.

> 路由器连接帧中继网络的是 Serial接口

> 广播域的定义是 汇聚层的功能。

> TCP滑动窗口cwnd的值存放在本地

> 在运行Linux系统的服务器中，使用BIND配置域名服务器，主配置文件存放在named.conf中

> 水平分割法的核心是：一条路由信息不要发送给该消息的来源

> 4G标准的多路复用技术是：OFDM

> 一对有效码字之间的海明距离是：两个码字之间不同的位数。

> FTP服务器的属性窗口中本地路径文本框中的值应为：c:/inetpub/ftproot

> BGP4协议的优点是：防止域间路由循环



![image-20230319200742821](/assets/netproject/image-20230319200742821.png)

![image-20230319200807683](/assets/netproject/image-20230319200807683.png)



![image-20230319200807683](/assets/netproject/image-20230319200807683.png)

# UDP

* 无连接
* 尽最大努力交付
* 面向报文
* 支持一对一，一对多，多对一和多对多
* 首部开销小

![image-20230319210031056](/assets/netproject/image-20230319210031056.png)



# 传输层

![image-20230320072446531](/assets/netproject/image-20230320072446531.png)



# QOS

网络会有：延迟、延迟抖动、丢包 等情况

Qos：

QoS服务质量，是用来解决网络延迟和阻塞的问题的一种技术。

使用QoS的目的：

区分流量，保证重要流量及时被转发



* Best-Effort service：尽力而为的服务模型
  * 先进先出的转发
* Integrated service ：综合服务模型
  * 提前申请网络资源，各节点预留资源
  * 保证服务和负载控制服务
  * RSVP：资源预留协议-由接收方向路由器预约资源
* Differentiated service：区分服务模型
  * 不预留资源，通过多种方法指定报文的QoS





# IPv6

优点：

* 更大的地址空间：128
* 扩展的地址层次结构
* 灵活的首部格式
* 改进的选项
* 允许协议继续扩充
* 支持即插即用，即自动配置
* 支持资源的预分配

![image-20230320104817570](/assets/netproject/image-20230320104817570.png)



IP6地址的格式前缀FP用于表示 `地址类型或子网地址`



IPv6地址表示

示例:`2001:0db8:0000:0000:0000:ff00:0042:8329`

简写：删除每个十六进制中的一个或多个前导0；连续的0用双冒号代替，双冒号只能用一次

简写后：`2001:db8::ff00:42:8329`

还回地址:`0000:0000:0000:0000:0000:0000:0000:0001`

简写成：`::1`



6种扩展首部：

1. 逐条选项
2. 路由选择：松散源路由和路由记录
3. 分片
4. 鉴别
5. 封装安全有效载荷
6. 目的站选项





IPv6数据报的目的地址可以是以下三种基本类型地址之一：

单播：传统点对点通信

多播：一对多通信

任播：ip6新增类型，任播的目的站是一组计算机，但是数据报在交付时只交付其中一个，通常是路由距离最近的。



单播：

IPv6扩展了地址的分级概念

1. 全球路由选择前缀，占48位。	前缀是001
2. 子网标识符，占16位
3. 接口标识符，占64位，由mac地址生成而来

![image-20230320110415317](/assets/netproject/image-20230320110415317.png)



![image-20230320110503584](/assets/netproject/image-20230320110503584.png)

链路本地地址格式

每个设备的接口启动IPv6的时候会自动配置一个链路本地地址。

IPv6的邻居发现机制要用到IPv6的链路本地地址。

​	因为ip6没有广播，所以ip4中的ARP在ip6中不能工作，邻居发现 是ip6中对应ip4中的ARP机制的。

链路本地地址以 "FE80" 开头

路由器不会转发链路本地地址。



组播：

* 任何节点都是一个组播组的成员

* 一个源节点可以发送数据包到组播组
* 组播组的所有成员收到发往改组的数据包
* 组播地址在IP6包中不能用作源地址或出现在任何选路头中



任播：

* IP6特有的地址类型
* 路由器会将目标地址是任播地址的数据包发送给距离本路由器最近的一个网络接口
* 不可做源地址，可做目标地址
* 地址组成是：`子网前缀+全0`



特殊地址

![image-20230320111141621](/assets/netproject/image-20230320111141621.png)



与IP4兼容的地址：`0:0:0:0:0:0:w.x.y.z`或`::w.x.y.z`

IP4映射地址，`0:0:0:0:0:FFFF:w.x.y.z`或`::FFFF:w.x.y.z`

6 to 4地址：用于IP4网络中传送IP6的包

完整的6 to 4主机地址由6 to 4 地址的48位格式前缀`2002:a.b.c.d::/48`和其后面的子网标识符ID以及64位接口IP组成

ISATAP地址：地址的接口IP如下`0000:5EFE:w.x.y.z`





IP6过度方案：

双协议栈

隧道技术：三种自动隧道技术是：6to4，6over4，ISATAP隧道

网络地址转换技术

翻译技术(NAT-PT)：用于纯IP4主机和纯IP6主机之间的通信，不经过路由器





# ICMP

* 差错报告报文

  * 终点不可达
  * 源点抑制
  * 时间超过
  * 参数问题
  * 改变路由

* 询问报文

  * 回送请求或回答
  * 时间戳请求或回答

  

1. 对ICMP差错报告报文不再发送ICMP差错报告报文
2. 对具有特殊地址(如：127.0.0.0或0.0.0.0)的数据报文不发送ICMP差错报告报文
3. 对具有多播地址的数据报都不发送ICMP差错报告报文。
4. 对第一个分片的数据报片的所有后续数据报片都不发送ICMP差错报告报文。

`ping`命令

`tracert`：tracert ip地址		追踪到达目标地址时经过的路由器





# ARP

主机广播发送ARP请求分组

知道IP地址寻找MAC地址



ARP请求分组：包含发送方硬件地址/发送方IP地址，目标硬件地址/目标IP地址。

本地广播ARP请求：路由器不转发ARP请求

ARP响应分组：包含发送方硬件地址/发送方IP地址，/目标方硬件地址/目标方IP地址。

ARP分组封装在物理网络的帧中传输





# IPv4

![image-20230320141717999](/assets/netproject/image-20230320141717999.png)

首部长度：20

总长度：1500，超过1500需要分片



分片

![image-20230320141958842](/assets/netproject/image-20230320141958842.png)



 ![image-20230320143204612](/assets/netproject/image-20230320143204612.png)



TCP/IP

![image-20230320143730592](/assets/netproject/image-20230320143730592.png)



IP分类

A类：1-126

B类：128-191

C类：192-223

D类：224-239	组播地址



![image-20230320152418823](/assets/netproject/image-20230320152418823.png)





特殊IP地址

![image-20230320152739667](/assets/netproject/image-20230320152739667.png)



子网掩码

例题：

![image-20230320161117938](/assets/netproject/image-20230320161117938.png)

![image-20230320161229138](/assets/netproject/image-20230320161229138.png)





无分类编址 CIDR

CIDR使用斜线记法，它又称为CIDR记法，即在IP地址后面加上一个斜线/，然后写上网络前缀所占的位数，如：`220.78.168.0/24`





路由汇聚

![image-20230320164144641](/assets/netproject/image-20230320164144641.png)

![image-20230320164907526](/assets/netproject/image-20230320164907526.png)





# 常见的接入网

![image-20230320170007226](/assets/netproject/image-20230320170007226.png)

接入网技术：

![image-20230320181615216](/assets/netproject/image-20230320181615216.png)



常见接入网：`ISDN和xDSL`

ISDN综合业务数字网：是一个数字电话网络国际标准，一种典型的电路建环网络系统，通过普通的铜缆以更高的速率和质量传输语音和数据

![image-20230320182055743](/assets/netproject/image-20230320182055743.png)





`xDSL`：各种DSL数字用户线的总称，通过采用频分复用技术，利用电话线传送数字数据。

![image-20230320182148804](/assets/netproject/image-20230320182148804.png)



`HFC`：混合的光纤同轴电缆

在原有的CATV基础上进行双向改造

* 干线部分：光传输系统代替CATV中的同轴电缆
* 用户分配网：扔 保留同轴电缆网络结构，但放大器改成双向的。

可提供业务

* 保留原有CATV单向电视广播业务
* 利用剩余频带提供宽带数据业务。



`光纤接入网`

* 有源接入

  * 典型的设备主要是基于SDH的多业务传送平台、基于以太网或ATM的多业务接入平台等。这种技术作为有源设备仍然无法完全拜托电磁干扰和雷电影响，以及有源设备固有的维护问题。

* 无源光网络(PON)

  ![image-20230320184341178](/assets/netproject/image-20230320184341178.png)





# 广域网链路层协议

## HDLC

应用很广的面向`比特`的高级数据链路控制协议

HDLC也是思科路由器上默认的WAN接口封装协议，是思科私有协议

![image-20230320185117737](/assets/netproject/image-20230320185117737.png)



如果数据中有和开始和结束标志一样的数据，`01111110`，则使用`0比特插入法`，在数据中的每5个连续的1后插入一个0，接收端发现连续5个1后有个0，则删除0





![image-20230320190725532](/assets/netproject/image-20230320190725532.png)



## PPP

![image-20230320193357659](/assets/netproject/image-20230320193357659.png)



PAP

![image-20230320193945660](/assets/netproject/image-20230320193945660.png)



CHAP

![image-20230320194013318](/assets/netproject/image-20230320194013318.png)



# 广域网流量和差错控制

![image-20230320195125433](/assets/netproject/image-20230320195125433.png)



停等协议：

A向B发送数据，发送一部分之后，等待B返回确认帧ACK1，返回之后继续发送，如果没有返回，则不能发送剩余的数据。



滑动窗口协议：

A向B连续发送多个数据，B理应依次返回对应数据的确认帧，如发送0,1,2，则B应该发送0,1,2对应的ACK帧。A收到后，继续发送数据。



停等ARQ协议：

A向B发送数据时，B检测数据错误，或者数据丢失，B都不会返回任何消息，此时，A应该重新发送分组。

或者A在超时之后，仍然没有收到ACK，则重发分组。



选择重发ARQ协议：

ARQ与滑动窗口的组合。哪个分组发送错误，就重发哪个分组。



后退N帧ARQ：

有一组数据出错，则之前的数据都要重发。



# 广域网交换方式

## 电路交换

建立连接--传送数据--拆除连接

电路利用率极低

## 报文交换

存储-转发

## 分组交换(数据报、虚电路)

存储-转发

单位是`分组`

![image-20230320202421644](/assets/netproject/image-20230320202421644.png)

虚电路先建立逻辑连接，再按序传输数据，传输完成后拆除连接

虚电路有：x.25、帧中继、ATM   都被IP淘汰	

数据报是在不同的路线发送，可能会丢失，可能会失序，可靠性交给接收端的高层处理



![image-20230320203502677](/assets/netproject/image-20230320203502677.png)





![image-20230320203909970](/assets/netproject/image-20230320203909970.png)





# 无线局域网

![image-20230320204035374](/assets/netproject/image-20230320204035374.png)



![image-20230320204658187](/assets/netproject/image-20230320204658187.png)

