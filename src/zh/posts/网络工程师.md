---
title: 网工
icon: suanfaku
category:
  - 随笔
  - 课程
---
# ""

# 错题

> 同属于报文摘要算法的是：MD5和SHA-1

> 某网站向CA申请了数字证书，用户通过CA的签名来验证网站的真伪。

> FTP端口:21，Telnet端口：23，SMTP端口：25，DNS端口：53

> RIPv2的改进：
>
> 1. 使用组播而不是广播来传播路由更新报文
> 2. 采用了触发更新机制加速路由收敛。即出现路由变化时立即向邻居发送路由更新报文，而不必等待更新周期是否到达
> 3. 是一个无类别的协议。可以使用可变长子网掩码，也支持无类别域间路由CIDR
> 4. RIPv2支持认证，使用经过散列的口令字来限制路由更新信息的传播

> 世界各国通用的ISM频段是：2400--2483.5MHz

> E1信道的每个话音信道的数据速率是：64kb/s

> OSPF报文采用IP协议进行封装

> SNMP协议属于 应用层协议

> 要实现VTP动态修剪，在VTP域中的所有交换机都必须是服务器

> 广播多址网络：Ethernet

> 流水线的吞吐率是 最长流水段操作时间的倒数

> 核心层：提供不同区域之间的最佳路由和高速数据传送
>
> 汇聚层：将网络业务连接到接入层，并且实施与安全、流量、负载和路由相关的策略。
>
> 接入层：为用户提供了在本地网段访问应用系统的能力，还要解决相邻用户之间的互访需要，接入层负载一些用户信息的收集工作和用户管理功能。

> OSPF使用LSA分组来更新和维护拓扑数据库

> 把IP网络划分子网的好处是：减少广播域的大小

> Linux grep (global regular expression) 命令用于查找文件里符合条件的字符串或正则表达式。

> windows中权限最低的是everyone

> 三重DES加密使用2个密钥对，密钥长度是112.

> 路由器连接帧中继网络的是 Serial接口

> 广播域的定义是 汇聚层的功能。

> TCP滑动窗口cwnd的值存放在本地

> 在运行Linux系统的服务器中，使用BIND配置域名服务器，主配置文件存放在named.conf中

> 水平分割法的核心是：一条路由信息不要发送给该消息的来源

> 4G标准的多路复用技术是：OFDM

> 一对有效码字之间的海明距离是：两个码字之间不同的位数。

> FTP服务器的属性窗口中本地路径文本框中的值应为：c:/inetpub/ftproot

> BGP4协议的优点是：防止域间路由循环



![image-20230319200742821](/assets/netproject/image-20230319200742821.png)

![image-20230319200807683](/assets/netproject/image-20230319200807683.png)



![image-20230319200807683](/assets/netproject/image-20230319200807683.png)

# UDP

* 无连接
* 尽最大努力交付
* 面向报文
* 支持一对一，一对多，多对一和多对多
* 首部开销小

![image-20230319210031056](/assets/netproject/image-20230319210031056.png)



# 传输层

![image-20230320072446531](/assets/netproject/image-20230320072446531.png)



# QOS

网络会有：延迟、延迟抖动、丢包 等情况

Qos：

QoS服务质量，是用来解决网络延迟和阻塞的问题的一种技术。

使用QoS的目的：

区分流量，保证重要流量及时被转发



* Best-Effort service：尽力而为的服务模型
  * 先进先出的转发
* Integrated service ：综合服务模型
  * 提前申请网络资源，各节点预留资源
  * 保证服务和负载控制服务
  * RSVP：资源预留协议-由接收方向路由器预约资源
* Differentiated service：区分服务模型
  * 不预留资源，通过多种方法指定报文的QoS





# IPv6

优点：

* 更大的地址空间：128
* 扩展的地址层次结构
* 灵活的首部格式
* 改进的选项
* 允许协议继续扩充
* 支持即插即用，即自动配置
* 支持资源的预分配

![image-20230320104817570](/assets/netproject/image-20230320104817570.png)



IP6地址的格式前缀FP用于表示 `地址类型或子网地址`



IPv6地址表示

示例:`2001:0db8:0000:0000:0000:ff00:0042:8329`

简写：删除每个十六进制中的一个或多个前导0；连续的0用双冒号代替，双冒号只能用一次

简写后：`2001:db8::ff00:42:8329`

还回地址:`0000:0000:0000:0000:0000:0000:0000:0001`

简写成：`::1`



6种扩展首部：

1. 逐条选项
2. 路由选择：松散源路由和路由记录
3. 分片
4. 鉴别
5. 封装安全有效载荷
6. 目的站选项





IPv6数据报的目的地址可以是以下三种基本类型地址之一：

单播：传统点对点通信

多播：一对多通信

任播：ip6新增类型，任播的目的站是一组计算机，但是数据报在交付时只交付其中一个，通常是路由距离最近的。



单播：

IPv6扩展了地址的分级概念

1. 全球路由选择前缀，占48位。	前缀是001
2. 子网标识符，占16位
3. 接口标识符，占64位，由mac地址生成而来

![image-20230320110415317](/assets/netproject/image-20230320110415317.png)



![image-20230320110503584](/assets/netproject/image-20230320110503584.png)

链路本地地址格式

每个设备的接口启动IPv6的时候会自动配置一个链路本地地址。

IPv6的邻居发现机制要用到IPv6的链路本地地址。

​	因为ip6没有广播，所以ip4中的ARP在ip6中不能工作，邻居发现 是ip6中对应ip4中的ARP机制的。

链路本地地址以 "FE80" 开头

路由器不会转发链路本地地址。



组播：

* 任何节点都是一个组播组的成员

* 一个源节点可以发送数据包到组播组
* 组播组的所有成员收到发往改组的数据包
* 组播地址在IP6包中不能用作源地址或出现在任何选路头中



任播：

* IP6特有的地址类型
* 路由器会将目标地址是任播地址的数据包发送给距离本路由器最近的一个网络接口
* 不可做源地址，可做目标地址
* 地址组成是：`子网前缀+全0`



特殊地址

![image-20230320111141621](/assets/netproject/image-20230320111141621.png)



与IP4兼容的地址：`0:0:0:0:0:0:w.x.y.z`或`::w.x.y.z`

IP4映射地址，`0:0:0:0:0:FFFF:w.x.y.z`或`::FFFF:w.x.y.z`

6 to 4地址：用于IP4网络中传送IP6的包

完整的6 to 4主机地址由6 to 4 地址的48位格式前缀`2002:a.b.c.d::/48`和其后面的子网标识符ID以及64位接口IP组成

ISATAP地址：地址的接口IP如下`0000:5EFE:w.x.y.z`





IP6过度方案：

双协议栈

隧道技术：三种自动隧道技术是：6to4，6over4，ISATAP隧道

网络地址转换技术

翻译技术(NAT-PT)：用于纯IP4主机和纯IP6主机之间的通信，不经过路由器





# ICMP

* 差错报告报文

  * 终点不可达
  * 源点抑制
  * 时间超过
  * 参数问题
  * 改变路由

* 询问报文

  * 回送请求或回答
  * 时间戳请求或回答

  

1. 对ICMP差错报告报文不再发送ICMP差错报告报文
2. 对具有特殊地址(如：127.0.0.0或0.0.0.0)的数据报文不发送ICMP差错报告报文
3. 对具有多播地址的数据报都不发送ICMP差错报告报文。
4. 对第一个分片的数据报片的所有后续数据报片都不发送ICMP差错报告报文。

`ping`命令

`tracert`：tracert ip地址		追踪到达目标地址时经过的路由器





# ARP

主机广播发送ARP请求分组

知道IP地址寻找MAC地址



ARP请求分组：包含发送方硬件地址/发送方IP地址，目标硬件地址/目标IP地址。

本地广播ARP请求：路由器不转发ARP请求

ARP响应分组：包含发送方硬件地址/发送方IP地址，/目标方硬件地址/目标方IP地址。

ARP分组封装在物理网络的帧中传输





# IPv4

![image-20230320141717999](/assets/netproject/image-20230320141717999.png)

首部长度：20

总长度：1500，超过1500需要分片



分片

![image-20230320141958842](/assets/netproject/image-20230320141958842.png)



 ![image-20230320143204612](/assets/netproject/image-20230320143204612.png)



TCP/IP

![image-20230320143730592](/assets/netproject/image-20230320143730592.png)



IP分类

A类：1-126

B类：128-191

C类：192-223

D类：224-239	组播地址



![image-20230320152418823](/assets/netproject/image-20230320152418823.png)





特殊IP地址

![image-20230320152739667](/assets/netproject/image-20230320152739667.png)



子网掩码

例题：

![image-20230320161117938](/assets/netproject/image-20230320161117938.png)

![image-20230320161229138](/assets/netproject/image-20230320161229138.png)





无分类编址 CIDR

CIDR使用斜线记法，它又称为CIDR记法，即在IP地址后面加上一个斜线/，然后写上网络前缀所占的位数，如：`220.78.168.0/24`





路由汇聚

![image-20230320164144641](/assets/netproject/image-20230320164144641.png)

![image-20230320164907526](/assets/netproject/image-20230320164907526.png)





# 常见的接入网

![image-20230320170007226](/assets/netproject/image-20230320170007226.png)

接入网技术：

![image-20230320181615216](/assets/netproject/image-20230320181615216.png)



常见接入网：`ISDN和xDSL`

ISDN综合业务数字网：是一个数字电话网络国际标准，一种典型的电路建环网络系统，通过普通的铜缆以更高的速率和质量传输语音和数据

![image-20230320182055743](/assets/netproject/image-20230320182055743.png)





`xDSL`：各种DSL数字用户线的总称，通过采用频分复用技术，利用电话线传送数字数据。

![image-20230320182148804](/assets/netproject/image-20230320182148804.png)



`HFC`：混合的光纤同轴电缆

在原有的CATV基础上进行双向改造

* 干线部分：光传输系统代替CATV中的同轴电缆
* 用户分配网：扔 保留同轴电缆网络结构，但放大器改成双向的。

可提供业务

* 保留原有CATV单向电视广播业务
* 利用剩余频带提供宽带数据业务。



`光纤接入网`

* 有源接入

  * 典型的设备主要是基于SDH的多业务传送平台、基于以太网或ATM的多业务接入平台等。这种技术作为有源设备仍然无法完全拜托电磁干扰和雷电影响，以及有源设备固有的维护问题。

* 无源光网络(PON)

  ![image-20230320184341178](/assets/netproject/image-20230320184341178.png)





# 广域网链路层协议

## HDLC

应用很广的面向`比特`的高级数据链路控制协议

HDLC也是思科路由器上默认的WAN接口封装协议，是思科私有协议

![image-20230320185117737](/assets/netproject/image-20230320185117737.png)



如果数据中有和开始和结束标志一样的数据，`01111110`，则使用`0比特插入法`，在数据中的每5个连续的1后插入一个0，接收端发现连续5个1后有个0，则删除0





![image-20230320190725532](/assets/netproject/image-20230320190725532.png)



## PPP

![image-20230320193357659](/assets/netproject/image-20230320193357659.png)



PAP

![image-20230320193945660](/assets/netproject/image-20230320193945660.png)



CHAP

![image-20230320194013318](/assets/netproject/image-20230320194013318.png)



# 广域网流量和差错控制

![image-20230320195125433](/assets/netproject/image-20230320195125433.png)



停等协议：

A向B发送数据，发送一部分之后，等待B返回确认帧ACK1，返回之后继续发送，如果没有返回，则不能发送剩余的数据。



滑动窗口协议：

A向B连续发送多个数据，B理应依次返回对应数据的确认帧，如发送0,1,2，则B应该发送0,1,2对应的ACK帧。A收到后，继续发送数据。



停等ARQ协议：

A向B发送数据时，B检测数据错误，或者数据丢失，B都不会返回任何消息，此时，A应该重新发送分组。

或者A在超时之后，仍然没有收到ACK，则重发分组。



选择重发ARQ协议：

ARQ与滑动窗口的组合。哪个分组发送错误，就重发哪个分组。



后退N帧ARQ：

有一组数据出错，则之前的数据都要重发。



# 广域网交换方式

## 电路交换

建立连接--传送数据--拆除连接

电路利用率极低

## 报文交换

存储-转发

## 分组交换(数据报、虚电路)

存储-转发

单位是`分组`

![image-20230320202421644](/assets/netproject/image-20230320202421644.png)

虚电路先建立逻辑连接，再按序传输数据，传输完成后拆除连接

虚电路有：x.25、帧中继、ATM   都被IP淘汰	

数据报是在不同的路线发送，可能会丢失，可能会失序，可靠性交给接收端的高层处理



![image-20230320203502677](/assets/netproject/image-20230320203502677.png)





![image-20230320203909970](/assets/netproject/image-20230320203909970.png)





# 无线局域网

![image-20230320204035374](/assets/netproject/image-20230320204035374.png)



![image-20230320204658187](/assets/netproject/image-20230320204658187.png)




![image-20230321104655501](/assets/netproject/image-20230321104655501.png)

 



2.4GHz 信道

![image-20230321105236806](/assets/netproject/image-20230321105236806.png)



## IEEE802.11 MAC层协议

不可以直接使用以太网中的CSMA/CD协议，因为：

![image-20230321105522390](/assets/netproject/image-20230321105522390.png)

隐蔽站问题 ：A和C都向B发送数据，A和C都不知道信道已被占用，导致冲突。



![image-20230321105812856](/assets/netproject/image-20230321105812856.png)

暴露站问题：B向A发送数据，C也能感觉到，C认为信道被占用，以为不能向D发送数据，但是实际可以。



所以无线局域网不能使用CSMA/CD协议，只能使用改进的CSMA协议。

改进的办法是在CSMA增加一个碰撞避免功能。

IEEE802.11 就使用 CSMA/CA 协议。而在使用CSMA/CA的同时，还增加使用停止等待协议。



MAC层

![image-20230321110152857](/assets/netproject/image-20230321110152857.png)



## 常见WLAN安全设置

![image-20230321131026430](/assets/netproject/image-20230321131026430.png)

![image-20230321131155349](/assets/netproject/image-20230321131155349.png)





认证：

1. 开放系统认证。没有认证，都可以连入
2. MAC地址。根据MAC地址来判断是否可连入
3. 802.1x。
4. 域共享密钥。设置密码
5. web认证。类似校园网



## 组网

FAT AP ：简称胖AP

功能较多，不需要无线控制器，用于小型组网

![image-20230321131938502](/assets/netproject/image-20230321131938502.png)



FIT AP ：简称瘦AP

需要和无线控制器一起使用，用于大型组网

![image-20230321132034415](/assets/netproject/image-20230321132034415.png)



![image-20230321154907816](/assets/netproject/image-20230321154907816.png)



![image-20230321155211530](/assets/netproject/image-20230321155211530.png)

AC是以旁挂式的方式进行组网。且AP与AC并不在同一个网段，是由DHCP 



## 综合布线技术

![image-20230321155612115](/assets/netproject/image-20230321155612115.png)



# 以太通道

![image-20230321162006114](/assets/netproject/image-20230321162006114.png)

* 多条链路 负载均衡、提高带宽
* 容错率高：当一条链路失效时，使用其他链路通信。
* 以太网通道捆绑规则
  * 参与捆绑的端口必须属于同一个VLAN
  * 如果端口配置的是中继模式，那么应该在链路两端将通道中的所有端口配置成相同的中继模式
  * 所有参与捆绑的端口的物理参数位置必须相同
* 协议
  * PAGP(端口聚合协议)：思科私有，已不考
  * LACP(链路聚合控制协议)：IEEE802.3ad



# 生成树协议STP

两个终端中如果只有一个线路，则容错太低，如果线路故障就无法通信，所以增加一个交换机，来提高容错，但是又会引出新的问题。

## 物理环路广播风暴问题

![image-20230321182407857](/assets/netproject/image-20230321182407857.png)

aa主机发送ARP广播，通过A交换机，A交换机再广播给C和B，C和B又会互相发送广播，导致bb主机一直收到广播帧，会导致死机



## MAC地址不稳定问题

aa发送数据，A接收到aa的数据，并且是从1口进来的，发送给CB交换机后，又会收到C和B发送的数据，数据一样，但是进入口不一样，会一直更新进入口。



## STP协议功能

![image-20230321184000025](/assets/netproject/image-20230321184000025.png)

在新增的交换机上，逻辑断开环路，防止广播风暴

新增的接口被断开，在之前的线路没有故障之前，不会激活断开的端口。

当线路故障时，断开的端口被激活，恢复通信，起备份线路的作用。



STP协议算法

1. 选择根网桥(网桥就是早期的交换机)
   网桥ID唯一，交换机之间选择ID值最小的交换机作为网络中的跟网桥
   ![image-20230322085749503](/assets/netproject/image-20230322085749503.png)
   网桥优先级取值范围：0-65535	， 缺省值：32768
   要使网桥成为根网桥，则要降低这个缺省值
   ![image-20230322090100688](/assets/netproject/image-20230322090100688.png)
   这个案例中，A优先级最低，所以是根网桥，如果ID都一样，那就比较MAC地址
2. 选择根端口：在非根网桥选择根端口，依据是：
   1. 本端口到达根网桥路径成本最低
      ![image-20230322091103943](/assets/netproject/image-20230322091103943.png)
      C的1端口是根端口，B的1端口是根端口，100M成本是19.C和B的2端口距离根网桥都是100M+100M，但是BMAC较小，所以C的2端口被阻塞。
   2. 直连的网桥ID最小
      如果成本比较不出来，则比较与交换机直连的交换机网桥ID，较小的那一边的端口是根端口，另一个端口阻塞。如：D交换机和CB相连，成本一样，如果B交换机的ID较小，则D交换机上连接B的交换机的端口是根端口。
   3. 直连端口ID最小
      ![image-20230322091835863](/assets/netproject/image-20230322091835863.png)
      这个情况下，需要比直连交换机的端口ID最小的。B的1端口连接的A的1端口，A的1端口较小，所以B的1端口是根端口
3. 选择指定端口
   一条链路只有一端是指定端口
   1. 根网桥上的端口全是指定端口
   2. 本端口所在网桥到根网桥路径成本最低
   3. 本端口所在的网桥的ID值较小
   4. 本端口ID值较小。



经过STP计算，最终的逻辑结构为无环拓扑

![image-20230322100932982](/assets/netproject/image-20230322100932982.png)

左侧是交换机端口的几种状态，右侧是从0s开始依次向上，所需要的时间。

BPDU可以经过被逻辑阻塞的端口，因为它要计算STP树



## 快速生成树RSTP

为了解决STP缓慢的问题，有了RSTP

协议：`iEEE 802.1w `，后来并入到`IEEE 802.1D-2004`中

RSTP端口：根端口、指定端口、替代端口(Alternate)、备用端口(Backup)

RSTP端口状态：丢弃、学习、转发



RSTP提高速度的原因，快速收敛机制

1. 边缘端口机制。就是与主机相连交换机端口
2. 根端口快速切换机制。
3. 指定端口快速切换机制。 

切换端口就是，除了指定端口和根端口，另一个就是替换端口





## 多生成树协议 MSTP

STP没有对VLAN进行处理

思科交换机的PVST，每一个VLAN就有一个生成树，非常消耗资源



![image-20230322145814368](/assets/netproject/image-20230322145814368.png)

 如：1号以B为根交换机，阻塞左侧链路。2号以A为根交换机，阻塞右侧链路。1-50 的实例映射到1号，51-100 映射到2号。



# VLAN注册协议-GVRP协议

* Normal 模式
  * 允许该端口动态注册或注销VLAN。
  * 传播动态VLAN以及静态VLAN信息。
  * 会学习其他交换机所创建的VLAN
* Fixed 模式
  * 禁止该端口动态注册或注销VLAN
  * 只传播静态VLAN，不传播动态VLAN信息。
  * 只会把Fixed模式的交换机创建的VLAN传播出去，不会接收其他交换机创建的VLAN。
* Forbidden 模式
  * 禁止该端口动态注册或注销VLAN
  * 不传播除VLAN1以外的任何VLAN信息。



# VLAN

如果不划分VLAN，则主机发送广播时，同一个路由器下的所有主机都能收到。

划分VLAN后，发送广播只有本VLAN中的主机可以收到。

![image-20230322160627934](/assets/netproject/image-20230322160627934.png)



## VLAN的划分



* 静态VLAN

  * 基于交换机端口划分
    ![image-20230322160918146](/assets/netproject/image-20230322160918146.png)
    有一个VLAN表，端口1，7在同一个VLAN中，所以可以直接通信。

    插入VLAN标记后帧格式就变成了802.1Q帧

    ![image-20230322161118385](/assets/netproject/image-20230322161118385.png)

    VLANID 12位，可以容纳4096个，但是0和4095保留，所以是1-4094

    交换机连接终端的口叫做 Access口，只允许一个VLAN的帧通过

* 动态VLAN

  * 基于MAC
  * 基于网络协议
  * 基于子网
  * 基于策略



## 以太网端口类型

![image-20230322161733181](/assets/netproject/image-20230322161733181.png)

![image-20230322162225752](/assets/netproject/image-20230322162225752.png)

交换机与交换机之间使用Trunk端口。VLAN1是默认VLAN，可以不带标签通过，其他都需要带标签



# IEEE 802

![image-20230322162539313](/assets/netproject/image-20230322162539313.png)



`IEEE 802.3`：描述CSMA/CD 介质接入控制方法和物理层技术规范。

`IEEE 802.11`：描述无线局域网标准。



# CSMA/CD 

在总线型拓扑结构中，链路在同一时间由谁来使用，需要一个协议

## 载波侦听过程

* 非坚持型监听算法
  信道空闲，发送。信道忙，就等待T个时间，再次监听。
  信道利用率低，冲突也低
* 1-坚持型监听算法
  信道空闲，发送。信道忙，持续监听
  信道利用率高，冲突也高
* P-坚持型监听算法
  两者折中。信道空闲，以概率P发送，概率1-P推迟。



## 冲突检测方法

以太网的端到端往返时延2t，称为征用期，或碰撞窗口。



## 最短帧长计算公式

`传输时延>= 2 * 传播时延`

`传输时延=帧长/带宽`



## 发现冲突，停止发送

随机延迟重发--截断二进制指数退避算法

![image-20230323111333388](/assets/netproject/image-20230323111333388.png)



# 以太网-MAC

MAC  48位二进制 

![image-20230323111907683](/assets/netproject/image-20230323111907683.png)

目的地址是第八位二进制数。

MAC 全1 就是广播网卡



所有的MAC都要遵循一个标准

以太网V2帧格式

![image-20230323112238506](/assets/netproject/image-20230323112238506.png)



# 以太网传输介质

![image-20230323155421647](/assets/netproject/image-20230323155421647.png)

同轴电缆以不再使用

还有光纤。分为多模光纤和单模光纤，区别在于多模可以折射多次，已被淘汰

![image-20230323155528224](/assets/netproject/image-20230323155528224.png)



同种设备连接用交叉线。如B和B连接

如:`DCE与DTE连接`，DCE有交换机等，DTE有路由器等

不同设备用直通线连接，如A和B连接

如：`DCE与DCE连接`

目前设备已可以自适应



![image-20230323161448776](/assets/netproject/image-20230323161448776.png)



## 快速以太网

特点：

* 100Mbps
* 相同的帧格式
* 半双工/全双工
* 100Base-T

传输介质标准：

* 100Base-TX:
  `两对5类非屏蔽双绞线或1类屏蔽双绞线`
  `最大网段长度为100m`
  `采用4B/5B编码法`
* 100Base-FX:
  `最大长度为412米`
  `全双工多模光纤，最大长度为2千米`
  `4B5B编码`
* 100Base-T4
  `最大网段长度为100m`
  `采用8B/6T的编码方式`
  `四对双绞线，一对保留用于发送，一个用于接收，其余两个将通过协商切换方向`
  `不能全双工`
* 100Base-T2
  `最长网段为100m`
  `采用2对音频或数据级3、4或5类UTP电缆`
  `可全双工`

## 千兆以太网

特点：

* 1000Mbps
* 相同的帧格式
* 半双工/全双工

标准：

* 1000Base-T
  `IEEE 802.3ab`

  `5类非屏蔽双绞线`
  `每段段长最大100m`

* 1000Base-SX
  `IEEE 802.3z`
  `多模光纤`
  `段长550m`

* 1000Base-LX
  `单模光纤`

  `3km以上`
  `IEEE 802.3z`

* 1000Base-CX
  `屏蔽双绞线`

* `段长25m`

## 万兆以太网

特点：

* 10000Mbps
* 相同的帧格式
* 全双工

标准：

* 10GBASE-X
  `1个较简单的WDM器件、4个接收器和4个在1300nm波长附近以大约25nm为间隔工作的激光器`
  `每一对发送器/接收器在3.125Gbit/s速度（数据流速度为2.5Gbit/s）下工作`
* 10GBASE-R
  `64B/66B编码`
  `数据流为10.000Gbit/s`
  `因而产生的时钟速率为10.3Gbit/s`
* 10GBASE-W
  `是广域网接口`
  `其时钟为9.953Gbit/s数据流为9.585Gbit/s；`



# 以太网冲突域广播域

![image-20230323164548523](/assets/netproject/image-20230323164548523.png)



# 以太网技术-交换式以太网

交换机能够根据以太网帧中目标地址智能的转发数据

交换机隔离冲突域，实现全双工通信，不使用CSMA/CD协议。	而是以全双工方式工作。但仍然采用以太网的帧结构。

用户独享带宽，增加了总容量。

![image-20230323183842950](/assets/netproject/image-20230323183842950.png)

交换机转发数据帧的方式：快速转发(根据目的MAC)、存储转发(先存储，做差错校验，再转发数据)，



# 堆叠和级联

![image-20230323184842198](/assets/netproject/image-20230323184842198.png)





# TCP/IP

![image-20230323185841879](/assets/netproject/image-20230323185841879.png)

基于TCP的协议：

POP3：端口110。用来接收邮件

FTP：端口 21。文件传输协议

Telnet：端口23。远程登录协议

HTTP：端口80。超文本传输协议

SMTP：端口 23。简单邮件发送协议。



基于UDP的协议：

DHCP:6768。动态地址分配协议

TFTP：69。简单文件传输协议。

SNMP：161162。简单网络管理协议。

DNS：53。域名解析协议。





# 计算机网络

目的是实现计算机资源的共享

分布在不同地理位置的多台独立的“自治计算机”

通信必须遵循共同的网络协议。



![image-20230323194604892](/assets/netproject/image-20230323194604892.png)



## 网络协议

![image-20230323202218463](/assets/netproject/image-20230323202218463.png)



# 差错控制

## 奇偶校验

==检错码的构造：检错码=信息字段+校验字段==

在传送数据后加一位校验位。如果是采用奇校验，则让数据和校验位的1的个数是奇数，偶校验就是偶数

如：`11011`，使用奇校验就是加一位1，偶校验就是加一位0



## 海明码

特点：

可以检错，可以纠错

`m+k <= 2^k -1`：m是信息位长度，k是校验位长度。

通过公式，计算出k的位数，就是校验位的位数。

如：`101101100`，九位数据位，那么2^k >= 9+k+1；得出k最小等于4

则需要插入4位校验码，海明码插入校验码不是在最后插入，是在2的幂次方插入，也就是第1，2，4，8位插入。更多校验位就是往后数2的几次幂

编码方式：

先给出数据位+校验位的顺序。这里以7位数据位，4位校验位为例；

![img](https://img-blog.csdnimg.cn/20190217170526309.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE5NzgyMDE5,size_16,color_FFFFFF,t_70)

1,2,4,8是校验位，采用奇校验

![img](https://img-blog.csdnimg.cn/20190217171343339.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE5NzgyMDE5,size_16,color_FFFFFF,t_70)

把索引用二进制标注出来

![img](https://img-blog.csdnimg.cn/20190217172410691.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE5NzgyMDE5,size_16,color_FFFFFF,t_70)

接下来对其分类：

每个索引的二进制最右侧为“1”的索引有：1,3,5,7,9,11

那么这几个和`1`号奇校验位组成一组。

![img](https://img-blog.csdnimg.cn/20190224143851497.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE5NzgyMDE5,size_16,color_FFFFFF,t_70)

接下来是从右侧开始第二位为1的索引，都和`2`号校验位组成一组。

![img](https://img-blog.csdnimg.cn/201902241443080.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE5NzgyMDE5,size_16,color_FFFFFF,t_70)

相同的方法，把所有的校验位都组好

接下来，填充校验位，这里采用奇校验方法。

对于第一组来说，数据是1的个数为偶数的话，校验位就是1，因为要凑成奇数。

其他组使用相同的方法。如果数据是`1011001`，则填充校验位之后的数据是：

![img](https://img-blog.csdnimg.cn/20190224150821319.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE5NzgyMDE5,size_16,color_FFFFFF,t_70)

如果其中一位数据发生了错误。

首先检查第一组，如果1的个数是6位，则需要补一个1来达到奇数

如果第二组的1的个数是3位，则不需要添加，就补一个0

第三组的1的个数是2位，则需要补一个1

第四组的1个个数是3位，补0。

然后从第四组往第一组数，分别是：`0101`

0101的十进制数是5，所以是第5位发生了错误，把第五位反转就是正确的数据了。



## CRC校验

用于检错，不用于纠错

例题：`原始报文为：11001010101`，多项式是：X^4 + X^3 + X + 1

计算图：

![image-20230324142121400](/assets/netproject/image-20230324142121400.png)





# 数据通信

## 通信方式

单工

半双工

全双工

异步传输

同步传输



## 术语

信息、数据、信号(模拟信号、数字信号)、码元



## 失真

![image-20230324145732022](/assets/netproject/image-20230324145732022.png)



## 信道特性

当在理想状态下，码元和传输速率的关系

![image-20230324150557008](/assets/netproject/image-20230324150557008.png)

带宽W是`信道最大传输速率 - 信道最小传输速率`。

奈奎斯特定理：`码元速度B = 2W`，这是理想状态下。

如果一个码元传输一个比特位，那么数据速率R就是 R = B。

如果一个码元传输三个比特位，那么数据速率R就是 R= 3B，如码元18B/s，则数据速率R就是54bps。

则N就是等于8，因为R=Blog2N，54 = 18 * log2N 。N = 8

N码元种类8个的原因是：一个码元载三个比特，那么就要区分001,010,011等等8个数据。



有噪声干扰时：

![image-20230324151430323](/assets/netproject/image-20230324151430323.png)



## 调制技术

模拟信道传输数字数据

![image-20230324151903717](/assets/netproject/image-20230324151903717.png)

不同的调制技术的浮动频率：

![image-20230324151956747](/assets/netproject/image-20230324151956747.png)



## 编码技术

PCM脉冲编码调制技术

采样。采样频率应该大于模拟信号的最高频率的2倍

量化

编码





## 数字编码

数字在数字信道传播时的编码

![image-20230324153144380](/assets/netproject/image-20230324153144380.png)



![image-20230324160658996](/assets/netproject/image-20230324160658996.png)



![image-20230324160839097](/assets/netproject/image-20230324160839097.png)



现代编码格式：

![image-20230324161435288](/assets/netproject/image-20230324161435288.png)



## 复用技术

把多个低速信道组合成一个高速信道的技术，可以提高数据链路的利用率，从而使得一条高速的主干链路同时为多条低速的接入链路提供服务。

### 空分复用SDM

让同一个 频段在不同的空间内得到重复利用，称之为空分复用。如卫星通信中就使用该技术。

### 频分复用FDM

不同的数据传输在不同的频带上。

### 波分复用WDM

频分复用的另一种，用于光纤

例子：很多人说话频率不一样，频率一样的人互相通信。

### 时分复用TDM

把信道划分为时间片，用户在分配的时间片中传输数据。

有同步和异步。同步给每一个用户分配时间片，即是这个用户没有传输数据，异步是只给传输数据的用户。

例子：某个时间，这两个人说话，过一段时间，另外两个人说话。

### 码分复用CDMA

用户用码传递数据，接收码对应的数据。

例子：两组人同时说话，一组用的是中文，另一组用的是英文。



![image-20230324164713386](/assets/netproject/image-20230324164713386.png)



